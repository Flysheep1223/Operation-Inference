## ğŸ“‚ é¡¹ç›®æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨ä¸¥æ ¼çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œå°†æ¸¸æˆå¼•æ“ã€æ•Œäººè¡Œä¸ºã€æˆ˜æ–—ç³»ç»Ÿã€ç‰©å“ç³»ç»Ÿå’Œåœ°å›¾æ•°æ®å®Œå…¨è§£è€¦ã€‚ä»¥ä¸‹æ˜¯å„æ–‡ä»¶çš„è¯¦ç»†è®¾è®¡è¯´æ˜ï¼š

### ğŸ—ï¸ æ ¸å¿ƒå¼•æ“
**1. `main.pl` (å¯åŠ¨å…¥å£)**
- **åŠŸèƒ½**: ç¨‹åºçš„å¼•å¯¼åŠ è½½å™¨ã€‚
- **è®¾è®¡**: ä»…è´Ÿè´£åŠ è½½ `game_engine.pl` å’Œæä¾›å…¨å±€å¯åŠ¨è°“è¯ `play/0`ï¼Œä¿æŒå…¥å£æå…¶ç²¾ç®€ã€‚

**2. `game_engine.pl` (æ¸¸æˆå¼•æ“)**
- **åŠŸèƒ½**: æ¸¸æˆçš„ä¸­æ¢ç¥ç»ç³»ç»Ÿï¼Œé›†æˆæˆ˜æ–—ã€ç‰©å“ã€åœ°å›¾å’Œæ¸²æŸ“æ¨¡å—ã€‚
- **è®¾è®¡ç»†èŠ‚**:
  - **çŠ¶æ€ç®¡ç†**: ç»´æŠ¤ç©å®¶ä½ç½®ã€HPã€æ”»å‡»åŠ›(ATK)ã€åˆ†æ•°(Score)ã€å›åˆæ•°(Turn)ã€æ•Œäººå¼ºåŒ–ç­‰çº§ç­‰åŠ¨æ€è°“è¯ã€‚
  - **è¾“å…¥å¾ªç¯**: å®æ—¶ç›‘å¬é”®ç›˜è¾“å…¥ (WASD)ï¼Œå¹¶å°†è¾“å…¥æ˜ å°„ä¸ºæ¸¸æˆåŠ¨ä½œã€‚
  - **ç‰©ç†ä¸ç¢°æ’**: å¤„ç†ç§»åŠ¨è¯·æ±‚ï¼Œæ£€æµ‹å¢™å£ã€è¾¹ç•Œã€äº‹ä»¶ï¼ˆå¦‚å‡ºå£ï¼‰çš„ç¢°æ’ã€‚
  - **UI æ¸²æŸ“**: åœ¨æ§åˆ¶å°ç»˜åˆ¶åœ°å›¾ï¼Œé¡¶éƒ¨åŠ¨æ€æ˜¾ç¤ºå½“å‰HPã€ATKã€Scoreï¼Œå¹¶è´Ÿè´£æ¸²æŸ“å„ç±»ç¬¦å·ï¼ˆç©å®¶@ã€æ•Œäººã€å®è—ã€å‡ºå£$ç­‰ï¼‰ã€‚
  - **é€»è¾‘è°ƒåº¦**: åœ¨ç©å®¶æ¯æ¬¡è¡ŒåŠ¨åï¼Œä¾æ¬¡è§¦å‘ç‰©å“æ£€æµ‹ã€æˆ˜æ–—åˆ¤å®šã€äº‹ä»¶æ£€æŸ¥ï¼ˆå¦‚èƒœåˆ©æ¡ä»¶ï¼‰å’ŒåŠ¨æ€éš¾åº¦æ£€æŸ¥ã€‚
  - **æ¨¡å—åŒ–è°ƒç”¨**: æ•´åˆäº† `check_exit` é€»è¾‘ï¼Œå½“ç©å®¶åˆ°è¾¾å‡ºå£æ—¶è§¦å‘ç»“ç®—ã€‚
  - **è°ƒè¯•æŒ‡ä»¤**: æ–°å¢ `dehealthy(X)` æŒ‡ä»¤ï¼Œç”¨äºæµ‹è¯•æ‰£è¡€æœºåˆ¶ã€‚

### âš”ï¸ æˆ˜æ–—ä¸æ•°å€¼ç³»ç»Ÿ
**3. `combat_logic.pl` (æˆ˜æ–—é€»è¾‘)**
- **åŠŸèƒ½**: å°è£…æ‰€æœ‰æˆ˜æ–—åˆ¤å®šã€ä¼¤å®³ç»“ç®—ä¸æˆ˜åˆ©å“æ‰è½é€»è¾‘ã€‚
- **æœºåˆ¶**:
  - **8é‚»åŸŸæ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹ç©å®¶å‘¨å›´ 8 æ ¼å†…çš„æ•Œäººã€‚
  - **æ•°å€¼å¯¹æŠ—**: è‹¥ `ç©å®¶ATK >= æ•ŒäººATK` åˆ™æ¶ˆç­æ•Œäººï¼›å¦åˆ™ç©å®¶æ‰£é™¤HPå¹¶çœ©æ™•æ•Œäººã€‚
  - **æˆ˜åˆ©å“æ‰è½**: å‡»è´¥ç‰¹å®šæ•Œäººæœ‰æ¦‚ç‡æ‰è½å®è—ï¼š
    - **Hidden Bee (B)**: åŒé‡æ‰è½ â€”â€” å¿…å®šæ‰è½ Diamond (O) äº [26, 12] + éšæœºåŸç‰ˆæ‰è½(5% Diamond, 35% Gold, 60% Silver)ã€‚
    - **BFS Chaser (C)**: åŒé‡æ‰è½ â€”â€” å¿…å®šæ‰è½ Diamond (O) äº [30, 20] + éšæœºåŸç‰ˆæ‰è½(5% Diamond, 35% Gold, 60% Silver)ã€‚
    - **Timid Watched (T)**: å¿…å®šæ‰è½ Diamond (O) äº [34, 12] (æ— éšæœºæ‰è½ï¼Œç»´æŒå¸å–æ”»å‡»åŠ›è®¾å®š)ã€‚
    - **Random Walker (R)**: éšæœºæ‰è½ (1% Diamond, 29% Gold, 70% Silver)ã€‚

**4. `scaling_manager.pl` (åŠ¨æ€éš¾åº¦ç®¡ç†)**
- **åŠŸèƒ½**: æ§åˆ¶æ¸¸æˆéšæ—¶é—´æ¨ç§»çš„éš¾åº¦å¢é•¿ã€‚
- **æœºåˆ¶**: æ¯ç»è¿‡ **10 ä¸ªå›åˆ**ï¼Œåœ°å›¾ä¸Šæ‰€æœ‰æ•Œäººçš„ ATK è‡ªåŠ¨å¢åŠ  **10%**ã€‚

### ğŸ¤– æ•Œäººç³»ç»Ÿ (enemies/)
æ•Œäººç³»ç»Ÿè¢«è®¾è®¡ä¸ºæ’ä»¶å¼ç»“æ„ï¼Œç”±ç®¡ç†å™¨ç»Ÿä¸€è°ƒåº¦ã€‚

**5. `ai_manager.pl` (AI æ€»ç®¡)**
- **åŠŸèƒ½**: ç»Ÿä¸€è°ƒåº¦ `init_enemies` å’Œ `enemies_tick`ï¼Œè´Ÿè´£åˆ†å‘æ‰€æœ‰æ•Œäººçš„åˆå§‹åŒ–ä¸è¡ŒåŠ¨æŒ‡ä»¤ã€‚

**6. `ai_utils.pl` (AI å·¥å…·åº“)**
- **åŠŸèƒ½**: æä¾›é€šç”¨çš„ç½‘æ ¼è®¡ç®—ã€ç¢°æ’æ£€æµ‹å’Œè¾¹ç•Œæ£€æŸ¥è°“è¯ã€‚

**7. `bfs_chaser.pl` (æ™ºèƒ½è¿½æ•è€… - ä»£å· 'C')**
- **è¡Œä¸º**: è§‰é†’åä½¿ç”¨ BFS ç®—æ³•å¯»æ‰¾æœ€çŸ­è·¯å¾„è¿½å‡»ç©å®¶ã€‚å‡»è´¥åæ¦‚ç‡æ‰è½å®è—ã€‚

**8. `random_walker.pl` (å·¡é€»è€… - ä»£å· 'R')**
- **è¡Œä¸º**: åœ¨é™åˆ¶åŒºåŸŸå†…è¿›è¡Œéšæœºå·¡é€»ã€‚å‡»è´¥åæ¦‚ç‡æ‰è½å®è—ã€‚

**9. `hidden_bee.pl` (åŸ static_boss.pl - ä»£å· 'B')**
- **è¡Œä¸º**: å‘¨æœŸæ€§é‡Šæ”¾å‘å³ç§»åŠ¨çš„å°–åˆº (^) æ”»å‡»ç©å®¶ã€‚å‡»è´¥åæ¦‚ç‡æ‰è½å®è—ã€‚

**10. `timid_watched.pl` (ä¸­Boss - ä»£å· 'T')**
- **è¡Œä¸º**: åŒºåŸŸæ¸¸è¡ï¼Œè¢«å‡»è´¥åç©å®¶å¯åå™¬å…¶æ”»å‡»åŠ›ã€‚

**11. `smart_thief.pl` (æ™ºèƒ½çªƒè´¼ - ä»£å· 'I')**
- **è¡Œä¸º**: ä½¿ç”¨ PDDL è§„åˆ’å™¨æ™ºèƒ½å¯»è·¯ï¼Œä¼˜å…ˆå¯»æ‰¾å¹¶å·çªƒåœ°å›¾ä¸Šçš„å®è—ã€‚
- **é›†æˆ**: é€šè¿‡ `process_create` è°ƒç”¨å¤–éƒ¨ Python è„šæœ¬æ±‚è§£ PDDL é—®é¢˜ã€‚

### ğŸ§  PDDL è§„åˆ’æ¨¡å— (pddl/)
æœ¬æ¨¡å—å®ç°äº†ä¸€ä¸ªç®€æ˜“çš„ STRIPS è§„åˆ’å™¨é›†æˆï¼Œç”¨äºæ§åˆ¶ `Smart Thief` çš„è¡Œä¸ºã€‚

**12. `domain.pddl`**
- **åŠŸèƒ½**: å®šä¹‰ Grid World é¢†åŸŸï¼ŒåŒ…å« `location` ç±»å‹ã€`at`, `connected` è°“è¯å’Œ `move` åŠ¨ä½œã€‚

**13. `pddl_solver.py`**
- **åŠŸèƒ½**: Python å®ç°çš„ç®€æ˜“ PDDL æ±‚è§£å™¨ã€‚
- **ç®—æ³•**: è§£æ PDDL æ–‡ä»¶ï¼Œä½¿ç”¨ A* ç®—æ³•ï¼ˆæ›¼å“ˆé¡¿è·ç¦»å¯å‘å¼ï¼‰å¯»æ‰¾æœ€ä¼˜è·¯å¾„ï¼Œè¾“å‡ºæ ‡å‡† PDDL åŠ¨ä½œæ ¼å¼ `(move from to)`ã€‚

### ğŸ’ ç‰©å“ä¸è£…å¤‡ç³»ç»Ÿ (items/)
**14. `items/item_manager.pl` (ç‰©å“ç®¡ç†å™¨)**
- **åŠŸèƒ½**: è´Ÿè´£åœ¨æ¸¸æˆå¼€å§‹æ—¶éšæœºç”Ÿæˆè£…å¤‡å’Œå®è—ï¼Œå¹¶å¤„ç†ç©å®¶çš„æ‹¾å–é€»è¾‘ã€‚
- **æœºåˆ¶**: 
  - **ç”Ÿæˆç­–ç•¥**: 
    - **æ€¥æ•‘åŒ… (H)**: ä¼˜å…ˆç”Ÿæˆï¼Œä¾æ® `health_spawn_area` é…ç½®ã€‚
    - **è£…å¤‡ (S/K)**: éšåç”Ÿæˆï¼Œä¾æ® `equipment_spawn_area` é…ç½®ï¼Œå¹¶è‡ªåŠ¨é¿å¼€æ€¥æ•‘åŒ…å’Œæ•Œäººã€‚
    - **å®è— (O/G/V)**: æœ€åç”Ÿæˆï¼Œé¿å¼€æ‰€æœ‰å·²å­˜åœ¨çš„å®ä½“ï¼Œä¸”ä¸ä¼šç”Ÿæˆåœ¨ Boss æˆ¿é—´ç¦åŒº `[24,14]-[36,22]` å†…ã€‚
  - **æ‹¾å–é€»è¾‘**: ç©å®¶é‡åˆæ—¶è§¦å‘æ•ˆæœï¼Œè£…å¤‡å¢åŠ ATKï¼Œå®è—å¢åŠ Scoreã€‚

**15. `items/equipments/sword.pl` (é“å‰‘ - ä»£å· 'S')**
- **æ•ˆæœ**: æ‹¾å–åç©å®¶ ATK +10ã€‚

**16. `items/equipments/knife.pl` (åŒ•é¦– - ä»£å· 'K')**
- **æ•ˆæœ**: æ‹¾å–åç©å®¶ ATK +5ã€‚

**17. `items/tools/heathy_package.pl` (æ€¥æ•‘åŒ… - ä»£å· 'H')**
- **æ•ˆæœ**: æ‹¾å–åç«‹å³å›å¤ 40 ç‚¹ç”Ÿå‘½å€¼ã€‚

**18. `items/treasures/diamond.pl` (é’»çŸ³ - ä»£å· 'O')**
- **æ•ˆæœ**: æ‹¾å–å Score +1000ã€‚

**19. `items/treasures/gold.pl` (é»„é‡‘ - ä»£å· 'G')**
- **æ•ˆæœ**: æ‹¾å–å Score +500ã€‚

**20. `items/treasures/silver.pl` (ç™½é“¶ - ä»£å· 'V')**
- **æ•ˆæœ**: æ‹¾å–å Score +200ã€‚

### ğŸ—ºï¸ åœ°å›¾é…ç½® (maps/)
**21. `level1.pl` (å…³å¡é…ç½®)**
- **åŠŸèƒ½**: çº¯æ•°æ®æ–‡ä»¶ï¼Œå®šä¹‰åœ°å›¾è¾¹ç•Œã€å¢™å£å¸ƒå±€ã€å‡ºç”Ÿç‚¹ã€å‡ºå£ä½ç½®å’Œç‰¹æ®ŠåŒºåŸŸã€‚
- **é…ç½®é¡¹**:
  - `map_segment`: å¢™å£æ®µã€‚
  - `health_spawn_area`: æ€¥æ•‘åŒ…éšæœºç”ŸæˆåŒºåŸŸã€‚
  - `equipment_spawn_area`: è£…å¤‡éšæœºç”ŸæˆåŒºåŸŸã€‚

## ğŸš€ å¿«é€Ÿè¿è¡Œ

1. å¯åŠ¨ Prolog: swipl
2. åŠ è½½ä¸»æ–‡ä»¶: ['main.pl']
3. å¼€å§‹æ¸¸æˆ: play.

## ğŸ® æ§åˆ¶

- **W / A / S / D**: ä¸Š / å·¦ / ä¸‹ / å³ ç§»åŠ¨ã€‚
- **Q**: é€€å‡ºæ¸¸æˆã€‚
- **tp(X, Y)**: (è°ƒè¯•) ä¼ é€åˆ°åæ ‡ (X, Y)ã€‚
- **dehealthy(X)**: (è°ƒè¯•) ç«‹å³æ‰£é™¤ X ç‚¹ç”Ÿå‘½å€¼ã€‚

## ğŸ“Š æ¸¸æˆæ•°å€¼ä¸é…ç½®é€ŸæŸ¥

ä¸ºäº†æ–¹ä¾¿è°ƒè¯•å’Œå¹³è¡¡æ€§è°ƒæ•´ï¼Œä»¥ä¸‹åˆ—å‡ºäº†æ¸¸æˆä¸­æ‰€æœ‰çš„æ ¸å¿ƒæ•°å€¼åŠå…¶åœ¨æºç ä¸­çš„å®šä¹‰ä½ç½®ã€‚

### ğŸ§‘ ç©å®¶åˆå§‹æ•°å€¼
- **åˆå§‹ HP**: 100
  - ğŸ“ `game_engine.pl:346` (`assert(health(100))`)
- **åˆå§‹ ATK**: 15
  - ğŸ“ `game_engine.pl:347` (`assert(player_atk(15))`)

### ğŸ’ ç‰©å“æ•°å€¼
- **è£…å¤‡**
  - **Sword (S)**: ATK +10
    - ğŸ“ `items/equipments/sword.pl:5` (`player_atk(CurrentAtk), NewAtk is CurrentAtk + 10`)
  - **Knife (K)**: ATK +5
    - ğŸ“ `items/equipments/knife.pl:5` (`player_atk(CurrentAtk), NewAtk is CurrentAtk + 5`)
- **æ¶ˆè€—å“**
  - **Healthy Package (H)**: HP +40
    - ğŸ“ `items/tools/heathy_package.pl:7` (`increase_health(40)`)
- **å®è— (Score)**
  - **Diamond (O)**: +1000 åˆ†
    - ğŸ“ `items/treasures/diamond.pl:1` (`treasure_value(diamond, 1000, 'Diamond')`)
  - **Gold (G)**: +500 åˆ†
    - ğŸ“ `items/treasures/gold.pl:1` (`treasure_value(gold, 500, 'Gold')`)
  - **Silver (V)**: +200 åˆ†
    - ğŸ“ `items/treasures/silver.pl:1` (`treasure_value(silver, 200, 'Silver')`)

### ğŸ¤– æ•Œäººæ•°å€¼
| æ•Œäººä»£å· | åç§° | åˆå§‹ ATK | åˆå§‹ Stun | å®šä¹‰æ–‡ä»¶ |
| :--- | :--- | :--- | :--- | :--- |
| **C** | BFS Chaser | 15 | 0 | `enemies/bfs_chaser.pl:12` |
| **R** | Random Walker | 10 | 0 | `enemies/random_walker.pl:10` |
| **B** | Hidden Bee | 20 | 0 | `enemies/hidden_bee.pl:10` |
| **T** | Timid Watched | 100 | 0 | `enemies/timid_watched.pl:10` |
| **I** | Smart Thief | 15ï¼ˆæ— æ³•è§¦å‘æˆ˜æ–—ï¼‰ | 0 | `enemies/smart_thief.pl:18` |

### âš™ï¸ æ¸¸æˆæœºåˆ¶æ•°å€¼
- **éš¾åº¦åŠ¨æ€æå‡ (Scaling)**
  - **è§¦å‘å‘¨æœŸ**: æ¯ 10 å›åˆ
  - **æå‡å¹…åº¦**: æ•Œäºº ATK +10%
  - ğŸ“ `scaling_manager.pl:5-12` (`0 is Turn mod 10`, `NewAtk is round(Atk * 1.1)`)
- **å°–åˆºä¼¤å®³**
  - **ä¼¤å®³å€¼**: 5 HP
  - ğŸ“ `game_engine.pl:390` (`decrease_health(5)`)